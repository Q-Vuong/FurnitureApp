<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <link href="/css/component/navigation.css" rel="stylesheet">
    <link href="/css/component/breadcrumb.css" rel="stylesheet">
    <link href="/css/pages/banner.css" rel="stylesheet">

</head>

<body>

    <div class="container">
        {{#if successMessage}}
        <div class="alert alert-success" role="alert">
            {{successMessage}}
        </div>
        {{/if}}
        {{#if dangerMessage}}
        <div class="alert alert-danger" role="alert">
            {{dangerMessage}}
        </div>
        {{/if}}


        <div id="add-or-edit-notification">
            <h5 class="mb-4">{{viewTitle}}</h5>
            <hr class="mb-4">
            <form id="notificationForm" action="/notification/add" method="POST" enctype="multipart/form-data">
                <input type="hidden" id="id" name="id" value="{{notification._id}}">
                <div class="mb-3">
                    <label for="notificationImage" class="form-label">Ảnh: </label>
                    <input type="file" class="form-control" id="notificationImage" name="notificationImage"
                        accept="image/*">
                    <img src="{{notification.image}}" id="imagePreview" class="mt-2" style="max-width: 150px;">
                </div>
                <div class="mb-3">
                    <label for="title" class="form-label">Tiêu đề: </label>
                    <input type="text" class="form-control" id="title" name="title" value="{{notification.title}}"
                        required>
                </div>
                <div class="mb-3">
                    <label for="content" class="form-label">Nội dung: </label>
                    <textarea class="form-control" id="content" name="content"
                        required>{{notification.content}}</textarea>
                </div>
                <div class="mb-3">
                    <label for="notificationType" class="form-label">Loại thông báo: </label>
                    <select class="form-select" id="notificationType" name="notificationType" required>
                        <option value="">Chọn loại thông báo</option>
                        <option value="Khuyến mãi">Khuyến mãi</option>
                        <option value="Sản phẩm">Sản phẩm</option>
                        <option value="Cửa hàng">Cửa hàng</option>
                        <option value="Cửa hàng">Khác</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary" id="addNotification">Thực hiện</button>
                <a href="/notification/view" onclick="return confirmAction(event);" class="btn btn-danger ">Huỷ</a>
            </form>

        </div>

    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/js/notifications/loadPage_ntf.js"></script>
    <script>
        // Hiển thị ảnh trước khi tải lên
        document.getElementById('notificationImage').addEventListener('change', function (event) {
            var imageInput = event.target;
            var imagePreview = document.getElementById('imagePreview');
            var file = imageInput.files[0];
            var reader = new FileReader();
            reader.onload = function (e) {
                imagePreview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        });    
    </script>


</body>

</html>